task buildFrontEnd(dependsOn: ['buildYarn', 'copyYarn'])

def distDir = rootProject.file('../frontend/dist/')
def springDir = rootProject.file('src/main/resources/WEB')

task buildYarn(type:Exec) {
    workingDir '../frontend'
    
    inputs.dir(rootProject.file('../frontend/src'))
    outputs.dir(distDir)

    if (System.getProperty('os.name').toLowerCase(Locale.ROOT).contains('windows')) {
        commandLine 'cmd', '/c', 'yarn build'
    } else {
        commandLine 'yarn', 'build'
    }
}

task copyYarn(type: Copy) {
    includeEmptyDirs = true
    from distDir
    into springDir
}